<div class="danger-zones-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="title-container">
      <ion-icon name="warning" class="warning-icon"></ion-icon>
      <h1>Zonas Peligrosas</h1>
    </div>
    <div class="stats-container">
      <div class="stat-item">
        <ion-icon name="alert-circle" [style.color]="'#eb445a'" class="stat-icon"></ion-icon>
        <span class="stat-number">{{ criticalZones }}</span>
        <span class="stat-label">Zonas Muy Peligrosas</span>
      </div>
      <div class="stat-item">
        <ion-icon name="warning" [style.color]="'#ffc409'" class="stat-icon"></ion-icon>
        <span class="stat-number">{{ highRiskZones }}</span>
        <span class="stat-label">Zonas Peligrosas</span>
      </div>
      <div class="stat-item">
        <ion-icon name="alert" [style.color]="'#6030ff'" class="stat-icon"></ion-icon>
        <span class="stat-number">{{ mediumRiskZones }}</span>
        <span class="stat-label">Zonas Medias</span>
      </div>
      <div class="stat-item">
        <ion-icon name="checkmark-circle" [style.color]="'#2dd36f'" class="stat-icon"></ion-icon>
        <span class="stat-number">{{ lowRiskZones }}</span>
        <span class="stat-label">Zonas Sin Peligro</span>
      </div>
      <div class="stat-item">
        <ion-icon name="location" [style.color]="'#92BEE0'" class="stat-icon"></ion-icon>
        <span class="stat-number">{{ dangerZones.length }}</span>
        <span class="stat-label">Zonas Activas</span>
      </div>
      <div class="stat-item">
        <ion-icon name="analytics" [style.color]="'#92BEE0'" class="stat-icon"></ion-icon>
        <span class="stat-number">{{ totalIncidents }}</span>
        <span class="stat-label">Incidentes Base</span>
      </div>
      <div class="stat-item">
        <ion-icon name="radio-button-on" [style.color]="'#92BEE0'" class="stat-icon"></ion-icon>
        <span class="stat-number">100-400M</span>
        <span class="stat-label">Radio Seguridad</span>
      </div>
    </div>
  </div>

  <!-- Map Container -->
  <div class="map-container">
    <div class="map-header">
      <h2>Mapa de Zonas de Riesgo</h2>
      <div class="map-controls">
        <ion-button fill="clear" size="small" (click)="refreshMap()">
          <ion-icon name="refresh-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </div>
    </div>

    <!-- Map View -->
    <div class="map-view" id="dangerZonesMap">
      <div class="map-content">
        <!-- Google Map mount point -->
        <div id="gmap" class="gmap"></div>

        <!-- details overlay removed: zones will not show the persistent detail card -->
      </div>
    </div>

    <!-- Notification Controls -->
    <div class="notification-controls">
      <div class="notification-info">
        <ion-icon name="notifications-outline" class="notification-icon"></ion-icon>
        <div class="notification-text">
          <span class="notification-title">Sistema de Alertas</span>
          <span class="notification-subtitle">Notifica zonas peligrosas a todos los usuarios activos</span>
        </div>
      </div>
      
      <div class="notification-actions">
        <ion-button 
          fill="outline" 
          size="small" 
          (click)="previewNotification()"
          class="preview-btn">
          <ion-icon name="eye-outline" slot="start"></ion-icon>
          Vista Previa
        </ion-button>
        
        <ion-button 
          (click)="sendDangerZoneNotification()" 
          class="notify-btn"
          [disabled]="dangerZones.length === 0">
          <ion-icon name="send-outline" slot="start"></ion-icon>
          Notificar Zonas Peligrosas
        </ion-button>
      </div>
    </div>
  </div>
</div>
